<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ls-form 表单</title>
    <link rel="stylesheet" href="../css/vmd.min.css">
    <script src="../js/vue.min.js"></script>
    <script src="../js/vmd.min.js"></script>
    <script src="../js/lvm.min.js"></script>
</head>
<body>
<div id="app" v-cloak="">
    <template>
        <ls-card class="box-card">
            <div class="text item">
                <span style="line-height: 36px;margin: 0px 40%;">ls-form 表单</span>
                <ls-button style="float: right;" type="primary" icon="round-close" @click="history.go(-1)"></ls-button>
            </div>
        </ls-card>
    </template>
    <script>
        Lvm.create({
            rootElement: '#app',
            data: function () {
                return {

                }
            },
            mounted: function () {
                var _this = this;


            },
            methods: {

            }
        })

    </script>


</div>
由输入框、选择器、单选框、多选框等控件组成，用以收集、校验、提交数据

</br></br>
<div id="app1" v-cloak="">
    <template>
        <ls-card class="box-card">
            <div slot="header" class="clearfix">
                        <span style="line-height: 36px;">
典型表单
包括各种表单项，比如输入框、选择器、开关、单选框、多选框等

:::在 Form 组件中，每一个表单域由一个 Form-Item 组件构成，表单域中可以放置各种类型的表单控件，包括 Input、Select、Checkbox、Radio、Switch、DatePicker、TimePicker
                        </span>
            </div>
            <div>
                <template>
                    <ls-form ref="form" :model="form" label-width="80px" class="nomal-form" :label-position="labelPosition">
                        <ls-form-item label="名称">
                            <ls-input v-model="form.name"></ls-input>
                        </ls-form-item>
                        <ls-form-item label="活动区域">
                            <ls-select v-model="form.region" placeholder="请选择活动区域">
                                <ls-option label="区域一" value="shanghai"></ls-option>
                                <ls-option label="区域二" value="beijing"></ls-option>
                            </ls-select>
                        </ls-form-item>
                        <ls-form-item label="活动时间">
                            <ls-col :span="11">
                                <ls-date-picker type="date" placeholder="选择日期" v-model="form.date1" style="width: 100%"></ls-date-picker>
                            </ls-col>
                            <ls-col class="line" :span="2">-</ls-col>
                            <ls-col :span="11">
                                <ls-time-picker type="fixed-time" placeholder="选择时间" v-model="form.date2" style="width: 100%"></ls-time-picker>
                            </ls-col>
                        </ls-form-item>
                        <ls-form-item label="即时配送">
                            <ls-switch on-text="" off-text="" v-model="form.delivery"></ls-switch>
                        </ls-form-item>
                        <ls-form-item label="活动性质">
                            <ls-checkbox-group v-model="form.type">
                                <ls-checkbox label="美食/餐厅线上活动" name="type"></ls-checkbox>
                                <ls-checkbox label="地推活动" name="type"></ls-checkbox>
                                <ls-checkbox label="线下主题活动" name="type"></ls-checkbox>
                                <ls-checkbox label="单纯品牌曝光" name="type"></ls-checkbox>
                            </ls-checkbox-group>
                        </ls-form-item>
                        <ls-form-item label="特殊资源">
                            <ls-radio-group v-model="form.resource">
                                <ls-radio label="线上品牌商赞助"></ls-radio>
                                <ls-radio label="线下场地免费"></ls-radio>
                            </ls-radio-group>
                        </ls-form-item>
                        <ls-form-item label="活动形式">
                            <ls-input type="textarea" v-model="form.desc"></ls-input>
                        </ls-form-item>
                        <ls-form-item>
                            <ls-button type="primary" @click="onSubmit">立即创建</ls-button>
                            <ls-button>取消</ls-button>
                        </ls-form-item>
                    </ls-form>
                </template>
            </div>
        </ls-card>
    </template>
    <script>
        Lvm.create({
            rootElement: '#app1',
            data: function () {
                return {
                    labelPosition: 'right',
                    form: {
                        name: '',
                        region: '',
                        date1: '',
                        date2: '',
                        delivery: false,
                        type: [],
                        resource: '',
                        desc: ''
                    }
                }
            },
            mounted: function () {
                var _this = this;

            },
            methods: {
                onSubmit: function () {
                    console.log('submit!');
                }
            }
        })
    </script>
</div>




</br></br>
<div id="app2" v-cloak="">
    <template>
        <ls-card class="box-card">
            <div slot="header" class="clearfix">
                        <span style="line-height: 36px;">
行内表单
:::设置 inline 属性可以让表单域变为行内的表单域
                        </span>
            </div>
            <div>
                <template>
                    <ls-form inline="" :model="formInline" class="demo-form-inline">
                        <ls-form-item label="审批人">
                            <ls-input v-model="formInline.user" placeholder="审批人"></ls-input>
                        </ls-form-item>
                        <ls-form-item label="活动区域">
                            <ls-select v-model="formInline.region" placeholder="活动区域">
                                <ls-option label="区域一" value="shanghai"></ls-option>
                                <ls-option label="区域二" value="beijing"></ls-option>
                            </ls-select>
                        </ls-form-item><ls-form-item>
                        <ls-button type="primary" @click="onSubmit">查询</ls-button>
                    </ls-form-item>
                    </ls-form>
                </template>
            </div>
        </ls-card>
    </template>
    <script>
        Lvm.create({
            rootElement: '#app2',
            data: function () {
                return {
                    formInline: {
                        user: '',
                        region: ''
                    }
                }
            },
            mounted: function () {
                var _this = this;

            },
            methods: {
                onSubmit: function () {
                    console.log('submit!');
                }
            }
        })
    </script>
</div>


</br></br>
<div id="app3" v-cloak="">
    <template>
        <ls-card class="box-card">
            <div slot="header" class="clearfix">
                        <span style="line-height: 36px;">
对齐方式
根据具体目标和制约因素，选择最佳的标签对齐方式 :::通过设置 label-position 属性可以改变表单域标签的位置，可选值为 top、left，当设为 top 时标签会置于表单域的顶部
                        </span>
            </div>
            <div>
                <template>
                    <div>
                        <ls-radio-group v-model="labelPosition" size="small">
                            <ls-radio-button label="left">左对齐</ls-radio-button>
                            <ls-radio-button label="right">右对齐</ls-radio-button>
                            <ls-radio-button label="top">顶部对齐</ls-radio-button>
                        </ls-radio-group>
                        <div style="margin: 20px"></div>
                        <ls-form :label-position="labelPosition" label-width="80px" class="nomal-form" :model="formLabelAlign">
                            <ls-form-item label="名称">
                                <ls-input v-model="formLabelAlign.name"></ls-input>
                            </ls-form-item>
                            <ls-form-item label="活动区域">
                                <ls-input v-model="formLabelAlign.region"></ls-input>
                            </ls-form-item>
                            <ls-form-item label="活动形式">
                                <ls-input v-model="formLabelAlign.type"></ls-input>
                            </ls-form-item>
                        </ls-form>
                    </div>
                </template>
            </div>
        </ls-card>
    </template>
    <script>
        Lvm.create({
            rootElement: '#app3',
            data: function () {
                return {
                    labelPosition: 'right',
                    formLabelAlign: {
                        name: '',
                        region: '',
                        type: ''
                    }
                }
            },
            mounted: function () {
                var _this = this;

            },
            methods: {

            }
        })
    </script>
</div>

</br></br>
<div id="app4" v-cloak="">
    <template>
        <ls-card class="box-card">
            <div slot="header" class="clearfix">
                        <span style="line-height: 36px;">
表单验证
在防止用户犯错的前提下，尽可能让用户更早地发现并纠正错误。 :::Form 组件提供了表单验证的功能，只需要通过 rules 属性传入约定的验证规则，并 Form-Item 的 prop 属性设置为需校验的字段名即可。
                        </span>
            </div>
            <div>
                <template>
                    <div id="demo" v-cloak="">
                        <h3>表单验证</h3>
                        <p>在防止用户犯错的前提下，尽可能让用户更早地发现并纠正错误。</p>
                        <ls-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="100px" class="demo-ruleForm">
                            <ls-form-item label="活动名称" prop="name">
                                <ls-input v-model="ruleForm.name"></ls-input>
                            </ls-form-item>
                            <ls-form-item label="活动区域" prop="region">
                                <ls-select v-model="ruleForm.region" placeholder="请选择活动区域">
                                    <ls-option label="区域一" value="shanghai"></ls-option>
                                    <ls-option label="区域二" value="beijing"></ls-option>
                                </ls-select>
                            </ls-form-item>
                            <ls-form-item label="活动时间" required="">
                                <ls-col :span="11">
                                    <ls-form-item prop="date1">
                                        <ls-date-picker type="date" placeholder="选择日期" v-model="ruleForm.date1" style="width: 100%;"></ls-date-picker>
                                    </ls-form-item>
                                </ls-col>
                                <ls-col class="line" :span="2">-</ls-col>
                                <ls-col :span="11">
                                    <ls-form-item prop="date2">
                                        <ls-time-picker type="fixed-time" placeholder="选择时间" v-model="ruleForm.date2" style="width: 100%;"></ls-time-picker>
                                    </ls-form-item>
                                </ls-col>
                            </ls-form-item>
                            <ls-form-item label="即时配送" prop="delivery">
                                <ls-switch on-text="" off-text="" v-model="ruleForm.delivery"></ls-switch>
                            </ls-form-item>
                            <ls-form-item label="活动性质" prop="type">
                                <ls-checkbox-group v-model="ruleForm.type">
                                    <ls-checkbox label="美食/餐厅线上活动" name="type"></ls-checkbox>
                                    <ls-checkbox label="地推活动" name="type"></ls-checkbox>
                                    <ls-checkbox label="线下主题活动" name="type"></ls-checkbox>
                                    <ls-checkbox label="单纯品牌曝光" name="type"></ls-checkbox>
                                </ls-checkbox-group>
                            </ls-form-item>
                            <ls-form-item label="特殊资源" prop="resource">
                                <ls-radio-group v-model="ruleForm.resource">
                                    <ls-radio label="线上品牌商赞助"></ls-radio>
                                    <ls-radio label="线下场地免费"></ls-radio>
                                </ls-radio-group>
                            </ls-form-item>
                            <ls-form-item label="活动形式" prop="desc">
                                <ls-input type="textarea" v-model="ruleForm.desc"></ls-input>
                            </ls-form-item>
                            <ls-form-item>
                                <ls-button type="primary" @click="submitForm('ruleForm')">立即创建</ls-button>
                                <ls-button @click="resetForm('ruleForm')">重置</ls-button>
                            </ls-form-item>
                        </ls-form>
                        <br>
                        <br>

                        <h3>自定义校验规则</h3>
                        <ls-form :model="ruleForm2" :rules="rules2" ref="ruleForm2" label-width="100px" class="demo-ruleForm">
                            <ls-form-item label="密码" prop="pass">
                                <ls-input type="password" v-model="ruleForm2.pass" auto-complete="off"></ls-input>
                            </ls-form-item>
                            <ls-form-item label="确认密码" prop="checkPass">
                                <ls-input type="password" v-model="ruleForm2.checkPass" auto-complete="off"></ls-input>
                            </ls-form-item>
                            <ls-form-item label="年龄" prop="age">
                                <ls-input v-model.number="ruleForm2.age"></ls-input>
                            </ls-form-item>
                            <ls-form-item>
                                <ls-button type="primary" @click="submitForm('ruleForm2')">提交</ls-button>
                                <ls-button @click="resetForm('ruleForm2')">重置</ls-button>
                            </ls-form-item>
                        </ls-form>
                        <br>
                        <br>

                        <h3>动态增减表单项</h3>
                        <ls-form :model="dynamicValidateForm" ref="dynamicValidateForm" label-width="100px" class="demo-dynamic">
                            <ls-form-item prop="email" label="邮箱" :rules="[
        { required: true, message: '请输入邮箱地址', trigger: 'blur' },
        { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur,change' }
      ]">
                                <ls-input v-model="dynamicValidateForm.email"></ls-input>
                            </ls-form-item>
                            <ls-form-item v-for="(domain, index) in dynamicValidateForm.domains" :label="'域名' + index" :key="domain.key" :prop="'domains.' + index + '.value'" :rules="{
        required: true, message: '域名不能为空', trigger: 'blur'
      }">
                                <ls-input v-model="domain.value"></ls-input><ls-button @click.prevent="removeDomain(domain)">删除</ls-button>
                            </ls-form-item>
                            <ls-form-item>
                                <ls-button type="primary" @click="submitForm('dynamicValidateForm')">提交</ls-button>
                                <ls-button @click="addDomain">新增域名</ls-button>
                                <ls-button @click="resetForm('dynamicValidateForm')">重置</ls-button>
                            </ls-form-item>
                        </ls-form>
                        <br>
                        <br>

                        <h3>数字类型验证</h3>
                        <ls-form :model="numberValidateForm" ref="numberValidateForm" label-width="100px" class="demo-ruleForm">
                            <ls-form-item label="年龄" prop="age" :rules="[
        { required: true, message: '年龄不能为空'},
        { type: 'number', message: '年龄必须为数字值'}
      ]">
                                <ls-input type="age" v-model.number="numberValidateForm.age" auto-complete="off"></ls-input>
                            </ls-form-item>
                            <ls-form-item>
                                <ls-button type="primary" @click="submitForm('numberValidateForm')">提交</ls-button>
                                <ls-button @click="resetForm('numberValidateForm')">重置</ls-button>
                            </ls-form-item>
                        </ls-form>
                    </div>
                </template>
            </div>
        </ls-card>
    </template>
    <script>
        Lvm.create({
            rootElement: '#app4',
            data: function () {
                var _this = this;
                var checkAge = function(rule, value, callback) {
                    if (!value) {
                        return callback(new Error('年龄不能为空'));
                    }
                    setTimeout(function() {
                        if (!Number.isInteger(value)) {
                            callback(new Error('请输入数字值'));
                        } else {
                            if (value < 18) {
                                callback(new Error('必须年满18岁'));
                            } else {
                                callback();
                            }
                        }
                    }, 1000);
                };
                var validatePass = function(rule, value, callback) {
                    if (value === '') {
                        callback(new Error('请输入密码'));
                    } else {
                        if (_this.ruleForm2.checkPass !== '') {
                            _this.$refs.ruleForm2.validateField('checkPass');
                        }
                        callback();
                    }
                };
                var validatePass2 = function(rule, value, callback) {
                    if (value === '') {
                        callback(new Error('请再次输入密码'));
                    } else if (value !== this.ruleForm2.pass) {
                        callback(new Error('两次输入密码不一致!'));
                    } else {
                        callback();
                    }
                };
                return {
                    ruleForm: {
                        name: '',
                        region: '',
                        date1: '',
                        date2: '',
                        delivery: false,
                        type: [],
                        resource: '',
                        desc: ''
                    },
                    ruleForm2: {
                        pass: '',
                        checkPass: '',
                        age: ''
                    },
                    rules: {
                        name: [
                            { required: true, message: '请输入活动名称', trigger: 'blur' },
                            { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }
                        ],
                        region: [
                            { required: true, message: '请选择活动区域', trigger: 'change' }
                        ],
                        date1: [
                            { type: 'date', required: true, message: '请选择日期', trigger: 'change' }
                        ],
                        date2: [
                            { type: 'date', required: true, message: '请选择时间', trigger: 'change' }
                        ],
                        type: [
                            { type: 'array', required: true, message: '请至少选择一个活动性质', trigger: 'change' }
                        ],
                        resource: [
                            { required: true, message: '请选择活动资源', trigger: 'change' }
                        ],
                        desc: [
                            { required: true, message: '请填写活动形式', trigger: 'blur' }
                        ]
                    },
                    rules2: {
                        pass: [
                            { validator: validatePass, trigger: 'blur' }
                        ],
                        checkPass: [
                            { validator: validatePass2, trigger: 'blur' }
                        ],
                        age: [
                            { validator: checkAge, trigger: 'blur' }
                        ]
                    },
                    dynamicValidateForm: {
                        domains: [{
                            value: ''
                        }],
                        email: ''
                    },
                    numberValidateForm: {
                        age: ''
                    }
                }
            },
            mounted: function () {
                var _this = this;

            },
            methods: {
                submitForm: function(formName) {
                    this.$refs[formName].validate(function(valid) {
                        if (valid) {
                            alert('submit!');
                        } else {
                            console.log('error submit!!');
                            return false;
                        }
                    });
                },
                resetForm: function(formName) {
                    this.$refs[formName].resetFields();
                },
                removeDomain: function(item) {
                    var index = this.dynamicValidateForm.domains.indexOf(item)
                    if (index !== -1) {
                        this.dynamicValidateForm.domains.splice(index, 1)
                    }
                },
                addDomain: function() {
                    this.dynamicValidateForm.domains.push({
                        value: '',
                        key: Date.now()
                    });
                }
            }
        })
    </script>
</div>






<div>
    Form 属性
    参数	说明	类型	可选值	默认值
    model	表单数据对象	object	—	—
    rules	表单验证规则	object	—	—
    inline	行内表单模式	boolean	—	false
    label-position	表单域标签的位置	string	right/left/top	right
    label-width	表单域标签的宽度，作为 Form 直接子元素的 form-item 会继承该值	string	—	—
    label-suffix	表单域标签的后缀	string	—	—
    show-message	是否显示校验错误信息	boolean	—	true
    Form 方法
    方法名	说明	回调参数
    validate	对整个表单进行校验的方法	callback：Function(boolean)
    validateField	对部分表单字段进行校验的方法	callback：Function(prop: string, callback: Function(errorMessage: string))
    resetFields	对整个表单进行重置，将所有字段值重置为初始值并移除校验结果	—
</div>












</body>
</html>

